<svg width="1600" height="1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .table-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #ffffff; }
      .field-text { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; }
      .pk { font-weight: bold; fill: #e74c3c; }
      .fk { font-weight: bold; fill: #3498db; }
      .table-header { fill: #34495e; stroke: #2c3e50; stroke-width: 2; }
      .table-body { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 1; }
      .relationship { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .one-to-many { stroke: #e67e22; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="800" y="30" class="title">Entity Relationship Diagram - Aplikasi Waskita</text>
  <text x="800" y="55" class="field-text" style="font-size: 14px; text-anchor: middle;">Sistem Klasifikasi Konten Media Sosial</text>
  
  <!-- Users Table -->
  <g id="users-table">
    <rect x="50" y="100" width="200" height="30" class="table-header"/>
    <text x="150" y="120" class="table-title" text-anchor="middle">users</text>
    <rect x="50" y="130" width="200" height="240" class="table-body"/>
    <text x="60" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="60" y="170" class="field-text">username - String(80)</text>
    <text x="60" y="190" class="field-text">email - String(120)</text>
    <text x="60" y="210" class="field-text">password_hash - String(255)</text>
    <text x="60" y="230" class="field-text">full_name - String(255)</text>
    <text x="60" y="250" class="field-text">bio - Text</text>
    <text x="60" y="270" class="field-text">preferences - JSON</text>
    <text x="60" y="290" class="field-text">role - String(20)</text>
    <text x="60" y="310" class="field-text">is_active - Boolean</text>
    <text x="60" y="330" class="field-text">last_login - DateTime</text>
    <text x="60" y="350" class="field-text">created_at - DateTime</text>
    <text x="60" y="370" class="field-text">updated_at - DateTime</text>
  </g>
  
  <!-- Datasets Table -->
  <g id="datasets-table">
    <rect x="300" y="100" width="200" height="30" class="table-header"/>
    <text x="400" y="120" class="table-title" text-anchor="middle">datasets</text>
    <rect x="300" y="130" width="200" height="160" class="table-body"/>
    <text x="310" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="310" y="170" class="field-text">name - String(255)</text>
    <text x="310" y="190" class="field-text">description - Text</text>
    <text x="310" y="210" class="field-text fk">uploaded_by (FK) - Integer</text>
    <text x="310" y="230" class="field-text">total_records - Integer</text>
    <text x="310" y="250" class="field-text">cleaned_records - Integer</text>
    <text x="310" y="270" class="field-text">classified_records - Integer</text>
    <text x="310" y="290" class="field-text">created_at - DateTime</text>
  </g>
  
  <!-- Raw Data Table -->
  <g id="raw-data-table">
    <rect x="550" y="100" width="200" height="30" class="table-header"/>
    <text x="650" y="120" class="table-title" text-anchor="middle">raw_data</text>
    <rect x="550" y="130" width="200" height="280" class="table-body"/>
    <text x="560" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="560" y="170" class="field-text">username - String(255)</text>
    <text x="560" y="190" class="field-text">content - Text</text>
    <text x="560" y="210" class="field-text">url - Text</text>
    <text x="560" y="230" class="field-text">platform - String(50)</text>
    <text x="560" y="250" class="field-text">source_type - String(20)</text>
    <text x="560" y="270" class="field-text">status - String(20)</text>
    <text x="560" y="290" class="field-text">file_size - BigInteger</text>
    <text x="560" y="310" class="field-text">original_filename - String(255)</text>
    <text x="560" y="330" class="field-text fk">dataset_id (FK) - Integer</text>
    <text x="560" y="350" class="field-text">dataset_name - String(255)</text>
    <text x="560" y="370" class="field-text fk">uploaded_by (FK) - Integer</text>
    <text x="560" y="390" class="field-text">created_at - DateTime</text>
    <text x="560" y="410" class="field-text">updated_at - DateTime</text>
  </g>
  
  <!-- Raw Data Scraper Table -->
  <g id="raw-data-scraper-table">
    <rect x="800" y="100" width="200" height="30" class="table-header"/>
    <text x="900" y="120" class="table-title" text-anchor="middle">raw_data_scraper</text>
    <rect x="800" y="130" width="200" height="320" class="table-body"/>
    <text x="810" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="810" y="170" class="field-text">username - String(255)</text>
    <text x="810" y="190" class="field-text">content - Text</text>
    <text x="810" y="210" class="field-text">url - Text</text>
    <text x="810" y="230" class="field-text">platform - String(50)</text>
    <text x="810" y="250" class="field-text">keyword - String(255)</text>
    <text x="810" y="270" class="field-text">scrape_date - Date</text>
    <text x="810" y="290" class="field-text">status - String(20)</text>
    <text x="810" y="310" class="field-text fk">dataset_id (FK) - Integer</text>
    <text x="810" y="330" class="field-text">dataset_name - String(255)</text>
    <text x="810" y="350" class="field-text fk">scraped_by (FK) - Integer</text>
    <text x="810" y="370" class="field-text">likes - Integer</text>
    <text x="810" y="390" class="field-text">retweets - Integer</text>
    <text x="810" y="410" class="field-text">replies - Integer</text>
    <text x="810" y="430" class="field-text">comments - Integer</text>
    <text x="810" y="450" class="field-text">shares - Integer</text>
  </g>
  
  <!-- Clean Data Upload Table -->
  <g id="clean-data-upload-table">
    <rect x="1050" y="100" width="200" height="30" class="table-header"/>
    <text x="1150" y="120" class="table-title" text-anchor="middle">clean_data_upload</text>
    <rect x="1050" y="130" width="200" height="200" class="table-body"/>
    <text x="1060" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="1060" y="170" class="field-text fk">raw_data_id (FK) - Integer</text>
    <text x="1060" y="190" class="field-text">username - String(255)</text>
    <text x="1060" y="210" class="field-text">content - Text</text>
    <text x="1060" y="230" class="field-text">cleaned_content - Text</text>
    <text x="1060" y="250" class="field-text">url - Text</text>
    <text x="1060" y="270" class="field-text">platform - String(50)</text>
    <text x="1060" y="290" class="field-text fk">dataset_id (FK) - Integer</text>
    <text x="1060" y="310" class="field-text fk">cleaned_by (FK) - Integer</text>
    <text x="1060" y="330" class="field-text">created_at - DateTime</text>
  </g>
  
  <!-- Clean Data Scraper Table -->
  <g id="clean-data-scraper-table">
    <rect x="1300" y="100" width="200" height="30" class="table-header"/>
    <text x="1400" y="120" class="table-title" text-anchor="middle">clean_data_scraper</text>
    <rect x="1300" y="130" width="200" height="200" class="table-body"/>
    <text x="1310" y="150" class="field-text pk">id (PK) - Integer</text>
    <text x="1310" y="170" class="field-text fk">raw_data_scraper_id (FK) - Integer</text>
    <text x="1310" y="190" class="field-text">username - String(255)</text>
    <text x="1310" y="210" class="field-text">content - Text</text>
    <text x="1310" y="230" class="field-text">cleaned_content - Text</text>
    <text x="1310" y="250" class="field-text">url - Text</text>
    <text x="1310" y="270" class="field-text">platform - String(50)</text>
    <text x="1310" y="290" class="field-text">keyword - String(255)</text>
    <text x="1310" y="310" class="field-text fk">dataset_id (FK) - Integer</text>
    <text x="1310" y="330" class="field-text fk">cleaned_by (FK) - Integer</text>
  </g>
  
  <!-- Classification Results Table -->
  <g id="classification-results-table">
    <rect x="300" y="500" width="250" height="30" class="table-header"/>
    <text x="425" y="520" class="table-title" text-anchor="middle">classification_results</text>
    <rect x="300" y="530" width="250" height="280" class="table-body"/>
    <text x="310" y="550" class="field-text pk">id (PK) - Integer</text>
    <text x="310" y="570" class="field-text">data_type - String(20)</text>
    <text x="310" y="590" class="field-text">data_id - Integer</text>
    <text x="310" y="610" class="field-text">model_name - String(20)</text>
    <text x="310" y="630" class="field-text">prediction - String(20)</text>
    <text x="310" y="650" class="field-text">probability_radikal - Float</text>
    <text x="310" y="670" class="field-text">probability_non_radikal - Float</text>
    <text x="310" y="690" class="field-text fk">classified_by (FK) - Integer</text>
    <text x="310" y="710" class="field-text">created_at - DateTime</text>
    <text x="310" y="730" class="field-text">is_corrected - Boolean</text>
    <text x="310" y="750" class="field-text">corrected_prediction - String(20)</text>
    <text x="310" y="770" class="field-text fk">corrected_by (FK) - Integer</text>
    <text x="310" y="790" class="field-text">corrected_at - DateTime</text>
  </g>
  
  <!-- User Activities Table -->
  <g id="user-activities-table">
    <rect x="600" y="500" width="200" height="30" class="table-header"/>
    <text x="700" y="520" class="table-title" text-anchor="middle">user_activities</text>
    <rect x="600" y="530" width="200" height="160" class="table-body"/>
    <text x="610" y="550" class="field-text pk">id (PK) - Integer</text>
    <text x="610" y="570" class="field-text fk">user_id (FK) - Integer</text>
    <text x="610" y="590" class="field-text">action - String(100)</text>
    <text x="610" y="610" class="field-text">description - Text</text>
    <text x="610" y="630" class="field-text">details - Text</text>
    <text x="610" y="650" class="field-text">icon - String(50)</text>
    <text x="610" y="670" class="field-text">color - String(20)</text>
    <text x="610" y="690" class="field-text">created_at - DateTime</text>
  </g>
  
  <!-- Dataset Statistics Table -->
  <g id="dataset-statistics-table">
    <rect x="850" y="500" width="200" height="30" class="table-header"/>
    <text x="950" y="520" class="table-title" text-anchor="middle">dataset_statistics</text>
    <rect x="850" y="530" width="200" height="200" class="table-body"/>
    <text x="860" y="550" class="field-text pk">id (PK) - Integer</text>
    <text x="860" y="570" class="field-text">total_raw_upload - Integer</text>
    <text x="860" y="590" class="field-text">total_raw_scraper - Integer</text>
    <text x="860" y="610" class="field-text">total_clean_upload - Integer</text>
    <text x="860" y="630" class="field-text">total_clean_scraper - Integer</text>
    <text x="860" y="650" class="field-text">total_classified - Integer</text>
    <text x="860" y="670" class="field-text">total_radikal - Integer</text>
    <text x="860" y="690" class="field-text">total_non_radikal - Integer</text>
    <text x="860" y="710" class="field-text">last_updated - DateTime</text>
  </g>
  
  <!-- Relationships -->
  
  <!-- Users to Datasets (1:N) -->
  <line x1="250" y1="210" x2="300" y2="210" class="one-to-many"/>
  <text x="275" y="205" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Users to Raw Data (1:N) -->
  <path d="M 250 250 Q 400 250 400 370 L 550 370" class="one-to-many"/>
  <text x="400" y="245" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Users to Raw Data Scraper (1:N) -->
  <path d="M 250 290 Q 525 290 525 350 L 800 350" class="one-to-many"/>
  <text x="525" y="285" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Datasets to Raw Data (1:N) -->
  <line x1="500" y1="230" x2="550" y2="330" class="one-to-many"/>
  <text x="525" y="275" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Datasets to Raw Data Scraper (1:N) -->
  <line x1="500" y1="210" x2="800" y2="310" class="one-to-many"/>
  <text x="650" y="255" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Raw Data to Clean Data Upload (1:1) -->
  <line x1="750" y1="170" x2="1050" y2="170" class="relationship"/>
  <text x="900" y="165" class="field-text" style="font-size: 10px;">1:1</text>
  
  <!-- Raw Data Scraper to Clean Data Scraper (1:1) -->
  <line x1="1000" y1="170" x2="1300" y2="170" class="relationship"/>
  <text x="1150" y="165" class="field-text" style="font-size: 10px;">1:1</text>
  
  <!-- Users to Clean Data Upload (1:N) -->
  <path d="M 250 330 Q 650 330 650 310 L 1050 310" class="one-to-many"/>
  <text x="650" y="325" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Users to Clean Data Scraper (1:N) -->
  <path d="M 250 350 Q 775 350 775 330 L 1300 330" class="one-to-many"/>
  <text x="775" y="345" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Users to Classification Results (1:N) -->
  <path d="M 150 370 Q 150 450 150 690 L 300 690" class="one-to-many"/>
  <text x="150" y="530" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Users to User Activities (1:N) -->
  <path d="M 150 370 Q 150 450 150 570 L 600 570" class="one-to-many"/>
  <text x="375" y="565" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Datasets to Clean Data Upload (1:N) -->
  <path d="M 500 250 Q 775 250 775 290 L 1050 290" class="one-to-many"/>
  <text x="775" y="245" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Datasets to Clean Data Scraper (1:N) -->
  <path d="M 500 270 Q 900 270 900 310 L 1300 310" class="one-to-many"/>
  <text x="900" y="265" class="field-text" style="font-size: 10px;">1:N</text>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="850" width="300" height="120" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
    <text x="200" y="870" class="table-title" style="fill: #2c3e50; text-anchor: middle;">Legend</text>
    <text x="60" y="890" class="field-text pk">PK = Primary Key</text>
    <text x="60" y="910" class="field-text fk">FK = Foreign Key</text>
    <line x1="60" y1="925" x2="100" y2="925" class="one-to-many"/>
    <text x="110" y="930" class="field-text">One-to-Many Relationship</text>
    <line x1="60" y1="945" x2="100" y2="945" class="relationship"/>
    <text x="110" y="950" class="field-text">One-to-One Relationship</text>
  </g>
  
  <!-- Database Info -->
  <g id="db-info">
    <rect x="400" y="850" width="400" height="120" fill="#e8f4fd" stroke="#bee5eb" stroke-width="1"/>
    <text x="600" y="870" class="table-title" style="fill: #2c3e50; text-anchor: middle;">Database Information</text>
    <text x="410" y="890" class="field-text">Database Type: PostgreSQL</text>
    <text x="410" y="910" class="field-text">ORM: SQLAlchemy with Flask-SQLAlchemy</text>
    <text x="410" y="930" class="field-text">Migration: Flask-Migrate (Alembic)</text>
    <text x="410" y="950" class="field-text">Total Tables: 8 (Users, Datasets, Raw Data, Clean Data, Results, etc.)</text>
  </g>
  
  <!-- Technical Notes -->
  <g id="tech-notes">
    <rect x="850" y="850" width="400" height="120" fill="#fff3cd" stroke="#ffeaa7" stroke-width="1"/>
    <text x="1050" y="870" class="table-title" style="fill: #2c3e50; text-anchor: middle;">Technical Notes</text>
    <text x="860" y="890" class="field-text">• Cascade delete operations implemented</text>
    <text x="860" y="910" class="field-text">• JSON fields for flexible data storage</text>
    <text x="860" y="930" class="field-text">• Timestamp tracking for audit trails</text>
    <text x="860" y="950" class="field-text">• Separate tables for upload vs scraper data</text>
  </g>
  
</svg>